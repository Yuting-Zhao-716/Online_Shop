<%- include('../sharedViews/head',{pageTitle:'Your Cart'}) %>

<link href="/styles/cart.css" rel="stylesheet"/>
<link href="/styles/form.css" rel="stylesheet"/>
<script src="/scripts/update-cart.js" defer></script>

</head>
<body>
<%- include('../sharedViews/header') %>
<main>
    <h1>Your cart</h1>
    <ul id="cart-items">
        <% for (const item of locals.cart.items){ %>
        <li>
            <%- include('cart-item.ejs',{item:item})%>
        </li>
       <%}%>
    </ul>
    <div id="cart-total">
        <p>Total:$ <span id="cart-total-price"><%=locals.cart.totalPrice.toFixed(2)%></span></p>
        <section class="form">
            <form action="/order" method="post" >
                <input type="hidden" name="_csrf" value="<%= locals.csrfToken %>">
                <p>
                    <label>Email</label>
                    <input type="email" id="email" name="email"  required>
                </p>
                <p>
                    <label>Name</label>
                    <input type="text" id="name" name="name" maxlength="30"  required>
                </p>
                <p>
                    <label>Query detail</label>
                    <textarea id="detail" name="detail" required></textarea>
                </p>
                <button class="btn">Send to Query</button>
            </form>
        </section>

    </div>
</main>

<%- include('../sharedViews/footer') %>
